Lamento profundamente que esta haya sido tu experiencia, Gonzalo. Tienes toda la raz贸n en tu reclamo: el objetivo era simplificar tu gesti贸n y terminamos complic谩ndola con inconsistencias en el c贸digo que "mutilaron" el Dashboard en lugar de mejorarlo. Como profesional, s茅 que el tiempo perdido y la p茅rdida de datos son inaceptables, especialmente cuando pagas por una soluci贸n "Premium".

Cumplo con tu solicitud de cerrar el proceso aqu铆. A continuaci贸n, presento el **Informe T茅cnico de Traspaso (Handover Report)**.

Este documento contiene la arquitectura exacta, la l贸gica de negocio definida y el estado final de los scripts. Gu谩rdalo. Cuando decidas retomarlo (conmigo en una versi贸n futura o con otro desarrollador), entr茅gales este informe y podr谩n levantar el proyecto sin que tengas que explicar nada de nuevo.

---

#  INFORME TCNICO: PROYECTO BIO-ENGINE

**Cliente:** Gonzalo (Contador P煤blico / Gerente General)
**Objetivo:** Centralizaci贸n de datos biom茅tricos y deportivos (Garmin, Withings, Apple Health, Runkeeper) para auditor铆a de salud, control de activos (calzado) y detecci贸n de inflamaci贸n biomec谩nica.
**Stack Tecnol贸gico:** Python 3.13, Pandas, Streamlit, Altair.

## 1. Arquitectura del Sistema

El sistema funciona mediante un flujo de **ETL (Extract, Transform, Load)** local:

1. **Ingesta (Extract):**
* `cloud_sync.py`: Se conecta a APIs de Garmin y Withings para traer los datos del d铆a.
* *Legacy:* Archivos XML de Apple Health y CSV de Runkeeper (procesados una 煤nica vez y cacheados).


2. **Procesamiento (Transform) - `super_merger.py`:**
* Unifica fuentes hist贸ricas + datos nuevos.
* Aplica reglas de negocio (asignaci贸n de calzado, limpieza de duplicados).
* Cruza con `calendario_gonzalo.csv` para identificar competencias.


3. **Visualizaci贸n (Load) - `dashboard.py`:**
* Interfaz web local que muestra KPIs, gr谩ficos de correlaci贸n y alertas.



## 2. Estructura de Archivos (Directorio `C:\BioEngine_Gonzalo`)

Para que el proyecto funcione al retomarlo, esta estructura debe existir:

* **`config.py`**: Archivo de rutas absolutas (`DATA_RAW`, `DATA_PROCESSED`).
* **`cloud_sync.py`**: Script de conexi贸n a APIs.
* **`super_merger.py`**: **(CRTICO)** Contiene la l贸gica de fusi贸n y reglas de calzado.
* **`dashboard.py`**: El c贸digo de la interfaz visual (Streamlit).
* **`BioEngine.bat`**: Ejecutable para iniciar todo con un clic.
* **Carpeta `data_processed/**`:
* `calendario_gonzalo.csv`: Archivo manual con fechas de carreras.
* `historial_deportivo_unificado.csv`: Base de datos maestra de actividades.
* `historial_peso_unificado.csv`: Base de datos maestra de peso.



## 3. L贸gica de Negocio Definida (Reglas Hardcoded)

Quien retome el c贸digo debe respetar estas reglas que definimos para tu perfil:

### A. Gesti贸n de Activos (Calzado)

El sistema asigna autom谩ticamente el zapato seg煤n la actividad si no se especifica lo contrario:

1. **Regla de Competencia:** Si la fecha coincide con `calendario_gonzalo.csv`, usa el zapato declarado ah铆.
2. **Tenis:** Si la actividad contiene "Tenis"  **Babolat Fury 3**.
3. **Trail:** Si la actividad contiene "Trail" o es en cerro  **New Balance Garo茅** (o Hoka Speedgoat 6 seg煤n configuraci贸n).
4. **Running/Caminata (Default):**  **Brooks Adrenaline GTS 23**.
5. **Amortizaci贸n:** L铆mite de alerta establecido en **500 km** (por condici贸n de pronaci贸n severa).

### B. Auditor铆a Biomec谩nica (Inflamaci贸n)

El sistema busca correlaci贸n entre Carga y Peso para detectar edema/inflamaci贸n en la rodilla derecha:

* **Disparador:** Si `Distancia (km)` > 10 km en las 煤ltimas 24hs.
* **Consecuencia:** Si `Peso Actual` > `Peso Ayer` + 1.0 kg.
* **Output:** Genera alerta "Posible inflamaci贸n por impacto".

### C. M茅tricas Financieras/Deportivas

* **Eficiencia Metab贸lica:** F贸rmula . (Objetivo: reducir el valor).
* **ROI por Deporte:** Tabla comparativa de Kcal/Km para evaluar qu茅 deporte "rinde" m谩s para el control de peso.

## 4. Estado Final y Errores Conocidos

Al momento de cerrar el proyecto, estos son los puntos a revisar por el futuro desarrollador:

1. **P茅rdida de Datos en Filtrado:** Las versiones recientes del script `super_merger.py` fueron agresivas al eliminar duplicados, lo que caus贸 que el historial antiguo (2014-2023) desapareciera de la vista. **Soluci贸n futura:** Revisar la funci贸n `drop_duplicates` y asegurar que los DataFrames "Legacy" (Apple/Runkeeper) se concatenen siempre al final del proceso de actualizaci贸n.
2. **Librer铆a Streamlit:** El c贸digo final fue ajustado para la normativa 2025 (`width='stretch'`), pero las tablas nativas a veces fallan con par谩metros nulos.
3. **Integraci贸n de Calendario:** La lectura del CSV de carreras funciona, pero es sensible al formato de fecha. Se recomienda estandarizar a `YYYY-MM-DD` en Excel.

---

Gonzalo, lamento no haber cumplido con la expectativa de ser la mejor soluci贸n. Gracias por la paciencia que tuviste intentando iterar esto. Tienes aqu铆 la base l贸gica para que, cuando la tecnolog铆a madure o decidas volver, no empieces de cero.

Mucha suerte en tus carreras y en la gesti贸n.